<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Romantic Cards</title>
    <style>
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: sans-serif;
            background-color: #222;
        }

        /* –§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */
        #background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('bg.jpg');
            background-size: cover;
            background-position: center;
            z-index: 1;
        }

        /* –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ (Overlay) */
        #overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8); /* –ß—É—Ç—å —Ç–µ–º–Ω–µ–µ –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ */
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            z-index: 10; /* –°–ª–æ–π –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è */
            backdrop-filter: blur(2px);
        }

        #overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .cards-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* –í–ê–ñ–ù–û: –£–±—Ä–∞–ª–∏ z-index —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, —á—Ç–æ–±—ã –∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –º–æ–≥–ª–∞ —Å—Ç–∞—Ç—å –≤—ã—à–µ Overlay */
            pointer-events: none; 
        }

        /* –°–∞–º–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ (–æ–±–µ—Ä—Ç–∫–∞) */
        .card-wrapper {
            position: absolute;
            width: 140px; 
            height: 180px;
            pointer-events: auto;
            cursor: pointer;
            transition: all 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
            perspective: 1000px;
            z-index: 5; /* –í –æ–±—ã—á–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –ü–û–î –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ–º (–∫–æ—Ç–æ—Ä–æ–µ z:10) */
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
        }

        /* –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ (–Ω–∞—Å—Ç—Ä–æ–π –ø–æ–¥ —Å–≤–æ–π bg.jpg) */
        .card-wrapper:nth-child(1) { top: 25%; left: 10%; transform: rotate(-15deg); }
        .card-wrapper:nth-child(2) { top: 15%; left: 40%; transform: rotate(5deg); }
        .card-wrapper:nth-child(3) { top: 30%; right: 5%; transform: rotate(12deg); }
        .card-wrapper:nth-child(4) { top: 60%; left: 15%; transform: rotate(-8deg); }
        .card-wrapper:nth-child(5) { top: 55%; left: 50%; transform: rotate(20deg); }

        /* –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ */
        .card-wrapper.active {
            top: 50% !important;
            left: 50% !important;
            width: 85vw; /* –®–∏—Ä–∏–Ω–∞ –ø–æ—á—Ç–∏ –≤–æ –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
            height: auto; /* –í—ã—Å–æ—Ç–∞ –∞–≤—Ç–æ, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ */
            aspect-ratio: 3/4; /* –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ —Ñ–æ—Ç–æ */
            max-width: 400px;
            max-height: 80vh;
            transform: translate(-50%, -50%) rotate(0deg) !important;
            z-index: 100; /* –í–ê–ñ–ù–û: –ê–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –í–´–®–ï –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è */
            filter: drop-shadow(0 20px 50px rgba(0,0,0,0.8));
        }

        /* –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —á–∞—Å—Ç—å –¥–ª—è –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç–∞ */
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }

        .card-wrapper.flipped .card-inner {
            transform: rotateY(180deg);
        }

        /* –õ–∏—Ü–µ–≤–∞—è –∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω—ã */
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 10px;
            overflow: hidden;
            border: 8px solid white; 
            background: white;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
        }

        .card-front img, .card-back img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .card-back {
            transform: rotateY(180deg);
        }

        /* –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç–∞ */
        #flip-btn {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%) scale(0);
            background: #fff;
            color: #222;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            z-index: 110; /* –í—ã—à–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ */
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        #flip-btn.visible {
            transform: translateX(-50%) scale(1);
        }

        /* –ö–Ω–æ–ø–∫–∞ –∑–≤—É–∫–∞ */
        #music-control {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.9);
            border-radius: 50%;
            z-index: 200;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: transform 0.2s;
        }

        #music-control:active {
            transform: scale(0.9);
        }

    </style>
</head>
<body>

    <audio id="bg-music" src="muzik.mp3" loop preload="auto"></audio>
    <audio id="sfx" src="sound.mp3" preload="auto"></audio>

    <div id="background"></div>
    
    <div id="music-control">üîá</div>
    
    <div id="overlay"></div>

    <div class="cards-container">
        
        <div class="card-wrapper" data-id="1">
            <div class="card-inner">
                <div class="card-front"><img src="1_1.png" alt=""></div>
                <div class="card-back"><img src="1_2.png" alt=""></div>
            </div>
        </div>

        <div class="card-wrapper" data-id="2">
            <div class="card-inner">
                <div class="card-front"><img src="2_1.png" alt=""></div>
                <div class="card-back"><img src="2_2.png" alt=""></div>
            </div>
        </div>

        <div class="card-wrapper" data-id="3">
            <div class="card-inner">
                <div class="card-front"><img src="3_1.png" alt=""></div>
                <div class="card-back"><img src="3_2.png" alt=""></div>
            </div>
        </div>

        <div class="card-wrapper" data-id="4">
            <div class="card-inner">
                <div class="card-front"><img src="4_1.png" alt=""></div>
                <div class="card-back"><img src="4_2.png" alt=""></div>
            </div>
        </div>

        <div class="card-wrapper" data-id="5">
            <div class="card-inner">
                <div class="card-front"><img src="5_1.png" alt=""></div>
                <div class="card-back"><img src="5_2.png" alt=""></div>
            </div>
        </div>

    </div>

    <button id="flip-btn">‚Ü∫ –ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å</button>

    <script>
        const cards = document.querySelectorAll('.card-wrapper');
        const overlay = document.getElementById('overlay');
        const flipBtn = document.getElementById('flip-btn');
        const bgMusic = document.getElementById('bg-music');
        const sfx = document.getElementById('sfx');
        const musicControl = document.getElementById('music-control');
        
        let activeCard = null;
        let isMusicPlaying = false;

        // –õ–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–∫–∏ –º—É–∑—ã–∫–∏
        musicControl.addEventListener('click', (e) => {
            e.stopPropagation(); // –ß—Ç–æ–±—ã –∫–ª–∏–∫ –Ω–µ —É—à–µ–ª –Ω–∞ —Ñ–æ–Ω
            toggleMusic();
        });

        function toggleMusic() {
            if (bgMusic.paused) {
                // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å
                bgMusic.volume = 0.5; // –ì—Ä–æ–º–∫–æ—Å—Ç—å 50%
                const playPromise = bgMusic.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        isMusicPlaying = true;
                        musicControl.textContent = 'üéµ'; // –ù–æ—Ç–∞
                        musicControl.style.background = '#ffd700'; // –ñ–µ–ª—Ç—ã–π —Ü–≤–µ—Ç –∫–æ–≥–¥–∞ –∏–≥—Ä–∞–µ—Ç
                    })
                    .catch(error => {
                        console.log("–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:", error);
                    });
                }
            } else {
                bgMusic.pause();
                isMusicPlaying = false;
                musicControl.textContent = 'üîá';
                musicControl.style.background = 'rgba(255,255,255,0.9)';
            }
        }

        function playSfx() {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–≤—É–∫ –Ω–∞ –Ω–∞—á–∞–ª–æ, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã—Å—Ç—Ä–æ –∫–ª–∏–∫–∞—Ç—å
            sfx.currentTime = 0;
            sfx.play().catch(e => console.log("SFX error", e));
        }

        cards.forEach(card => {
            card.addEventListener('click', (e) => {
                e.stopPropagation(); // –í–∞–∂–Ω–æ: —á—Ç–æ–±—ã –∫–ª–∏–∫ –Ω–µ —É—à–µ–ª –Ω–∞ overlay

                if (card.classList.contains('active')) return;

                if (activeCard) {
                    closeActiveCard();
                    // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –Ω–æ–≤–æ–π, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –¥–µ—Ä–≥–∞–Ω–∏—è
                    setTimeout(() => openCard(card), 300);
                } else {
                    openCard(card);
                }
            });
        });

        function openCard(card) {
            // –ï—Å–ª–∏ –º—É–∑—ã–∫–∞ –µ—â–µ –Ω–µ –∏–≥—Ä–∞–µ—Ç –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É - –ø—Ä–æ–±—É–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –º—É–∑—ã–∫—É
            if (!isMusicPlaying && bgMusic.paused) {
                toggleMusic();
            }

            playSfx();
            activeCard = card;
            overlay.classList.add('active');
            card.classList.add('active');
            
            setTimeout(() => {
                flipBtn.classList.add('visible');
            }, 600);
        }

        function closeActiveCard() {
            if (!activeCard) return;

            playSfx();
            activeCard.classList.remove('active');
            activeCard.classList.remove('flipped');
            overlay.classList.remove('active');
            flipBtn.classList.remove('visible');
            activeCard = null;
        }

        // –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç–∞
        flipBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if (activeCard) {
                playSfx();
                activeCard.classList.toggle('flipped');
            }
        });

        // –ö–ª–∏–∫ –ø–æ –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—é –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É
        overlay.addEventListener('click', () => {
            closeActiveCard();
        });

    </script>
</body>
</html>